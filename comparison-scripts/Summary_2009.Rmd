---
title: "Summary of 2009 Scenarios"
author: "Pragati Prasad"
date: "`r Sys.Date()`"
output: 
  html_document:
    code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## {.tabset}


### Scenario Key
RL01 - Base scenario: no intervention  
RL02 - Vaccine  
RL03 - Antivirals  
RL04 - Vaccine and Antivirals  
RL05 - School Closure when Illness incidence > 1%  
RL06 - School Closure on Date of Availability  
RL07 - Vaccine, Antivirals, and School Closure when Illness incidence > 1%   
RL08 - Vaccine, Antivirals, and School Closure on Date of Availability   

```{r RL01, warning=FALSE, message = FALSE}

library(ggsci)
library(reshape)
library(dplyr)
library(gridExtra)
library(ggplot2)
library(egg) 
library(plyr)
library(tidyr)
library(knitr)
library(kableExtra)
library(scales)

path <- "../model-forecasts/"

team.folder <- c("Columbia/COL/RL/", "Northeastern/RL/", "UTAustin/", "UVirginia/", "Imperial/", "Columbia/COL2/RL/", "Northeastern/RL2/")
team.abbrev <- c("COL", "NEU", "UTA", "UVA", "IMP", "COL2", "NEU")
file.types <- c("SymIllness", "Hosp", "Deaths", "AntiviralTX")

file.type <- file.types[1]
scn = "RL01_"
read_ill <- function(scn){
  
  cols <- c("sm.mean")

  s <- read.csv(paste0(path,team.folder[1],scn,file.type,"_",team.abbrev[1],".csv"))
  symillness <- data.frame(c(s[which(s$Agegroup == "Overall" &
                                       s$Bin_cml %in% cols),],
                             `team` = team.abbrev[1]))
  
  df_sub <- select(symillness, contains("Week"))
  peak.week<- c(team.abbrev[1], colnames(df_sub)[which.max(df_sub)])
  
  for(i in 2:7){
    
    if(i == 4){
      scn = gsub("RL", "RL_", scn)
    }
    if(i == 5){
      scn = gsub("_", "", scn)
      if(file.type == "Deaths"){
        file.type = "Death"
      }
    }
    if(i == 6){
      scn = paste0(scn, "_")
      if(file.type == "Death"){
        file.type = "Deaths"
      }
    }
    
    f =  paste0(path,team.folder[i],scn,file.type,"_",team.abbrev[i],".csv")
    if(i == 5){
      f =  paste0(path,team.folder[i],scn,file.type,team.abbrev[i],".csv")
    }

    if(file.exists(f)){
      s <- read.csv(f)
      if(ncol(s) > 58){
        s <- s[-1]
      }
      if(i == 7){
        team.abbrev[i] = "NEU2"
      }
      u <- data.frame(c(s[which(s$Agegroup == "Overall" & 
                                  s$Bin_cml %in% cols),],`team` = team.abbrev[i]))
      symillness <- rbind.fill(symillness, u)
      df_sub <- select(u, contains("Week"))
      peak.week <- rbind(peak.week, c(team.abbrev[i], colnames(df_sub)[which.max(df_sub)]))
    }
    
  }
  symillness$Peak.Magnitude[which(is.na(symillness$Peak.Magnitude))] <-
    symillness$PeakMagnitude[which(is.na(symillness$Peak.Magnitude))]
  
  symillness$Bin[which(symillness$Bin_cml == "Peak")] <- "sm.peak"
  cml <- symillness[c("Cml", "team", "Bin", "Peak.Magnitude")]
  peak.week <<- as.data.frame(peak.week)
  return(cml)
}

tab_RL01 <- read_ill(scn = "RL01_")
all.peak.weeks <- data.frame(`RL01` = as.integer(gsub("Week", "", peak.week$V2)))
rownames(all.peak.weeks) <- peak.week$V1

# Cumulative % Ill
cml <- data.frame(`RL01` = tab_RL01$Cml)

# Peak Magnitude
peak <- data.frame(`RL01` = tab_RL01$Peak.Magnitude)

rownames(cml) <- tab_RL01$team
rownames(peak) <- tab_RL01$team

scenario <- "RL02_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL02 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative % Ill
cml$RL02 <- long$Cml

# Peak Magnitude
peak$RL02 = long$Peak.Magnitude

scenario <- "RL03_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL03 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative % Ill
cml$RL03 <- long$Cml

# Peak Magnitude
peak$RL03 = long$Peak.Magnitude

scenario <- "RL04_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL04 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative % Ill
cml$RL04 <- long$Cml

# Peak Magnitude
peak$RL04 = long$Peak.Magnitude

scenario <- "RL05_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL05 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative % Ill
cml$RL05 <- long$Cml

# Peak Magnitude
peak$RL05 = long$Peak.Magnitude

scenario <- "RL06_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL06 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative % Ill
cml$RL06 <- long$Cml

# Peak Magnitude
peak$RL06 = long$Peak.Magnitude

scenario <- "RL07_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL07 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative % Ill
cml$RL07 <- long$Cml

# Peak Magnitude
peak$RL07 = long$Peak.Magnitude

scenario <- "RL08_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL08 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative % Ill
cml$RL08 <- long$Cml

# Peak Magnitude
peak$RL08 = long$Peak.Magnitude


```


### Cumulative % Ill

```{r ill_1, warning=FALSE, message = FALSE}

knitr::kable(cml, digits = 2, caption = "Cumulative % Ill") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

```


### Peak % Ill

```{r ill_2, warning=FALSE, message = FALSE}

knitr::kable(peak, digits = 2, caption = "Peak Magnitude Ill") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

peak_reduction <- data.frame(RL02 = (peak$RL01 - peak$RL02)/peak$RL01,
                             RL03 = (peak$RL01 - peak$RL03)/peak$RL01,
                             RL04 = (peak$RL01 - peak$RL04)/peak$RL01,
                             RL05 = (peak$RL01 - peak$RL05)/peak$RL01,
                             RL06 = (peak$RL01 - peak$RL06)/peak$RL01,
                             RL07 = (peak$RL01 - peak$RL07)/peak$RL01,
                             RL08 = (peak$RL01 - peak$RL08)/peak$RL01)
rownames(peak_reduction) <- rownames(peak)

knitr::kable(peak_reduction*100, digits = 2, caption = "% Reduction in Peak Magnitude Ill (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))


##Peak Week 
knitr::kable(all.peak.weeks, digits = 2, caption = "Peak Week") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))


#Peak delay
peak_delay <- data.frame(RL02 = -(all.peak.weeks$RL01 - all.peak.weeks$RL02),
                             RL03 = -(all.peak.weeks$RL01 - all.peak.weeks$RL03),
                             RL04 = -(all.peak.weeks$RL01 - all.peak.weeks$RL04),
                             RL05 = -(all.peak.weeks$RL01 - all.peak.weeks$RL05),
                             RL06 = -(all.peak.weeks$RL01 - all.peak.weeks$RL06),
                             RL07 = -(all.peak.weeks$RL01 - all.peak.weeks$RL07),
                             RL08 = -(all.peak.weeks$RL01 - all.peak.weeks$RL08))
rownames(peak_delay) <- rownames(peak_reduction) 
knitr::kable(peak_delay, digits = 2, caption = "Delay in Peak Week") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

```


### % Reduction in Ill

```{r ill_3, warning=FALSE, message = FALSE}

r <- read.csv("./SympIllness_2009.csv")
r$scenario <- sub("_", "", r$scenario)

w <- spread(r[2:4], key = "scenario", value = "reduction")

knitr::kable(w, digits = 2, caption = "% Reduction in Burden (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

```

```{r ill_4, warning=FALSE, message=FALSE}
t <- rbind(rank(-w[1,2:8]),
          rank(-w[2,2:8]),
          rank(-w[3,2:8]),
          rank(-w[4,2:8]),
          rank(-w[5,2:8]),
          rank(-w[6,2:8]),
          rank(-w[7,2:8]))

dt <- as.data.frame(t)
rownames(dt) <- w$team
colnames(dt) <- colnames(w)[2:8]

knitr::kable(dt, digits = 2, caption = "Rank Order of % Reduction in Burden (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

a <- read.csv("./SympIllness_age_2009.csv")
a$scenario <- sub("_", "", a$scenario)

w <- spread(a[2:5], key = "scenario", value = "reduction")

knitr::kable(w[2:9], digits = 2, caption = "% Reduction in Burden by Age (HP01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover")) %>%
  pack_rows(index = table(w$team))
```

```{r ill_5, warning=FALSE, message=FALSE}
# t <- as.data.frame(t(w[,2:8]))
# colnames(t) <- w$team
# t$mean <- rowMeans(t)
# t$team <- rownames(t)
# 
# o <- arrange(t, mean)
# rownames(o) <- o$team
# 
# ot <- as.data.frame(t(o[,1:8]))
# 
# knitr::kable(ot[8,], digits = 2, caption = "Rank ordered Mean % Reduction in Burden (RL01)") %>%
#   kable_styling(bootstrap_options = c("striped", "hover"))

```


### Cumulative Hosps
```{r hosp_1, warning=FALSE, message = FALSE}
file.type = file.types[2]
tab_RL01 <- read_ill(scn = "RL01_")
all.peak.weeks <- data.frame(`RL01` = as.integer(gsub("Week", "", peak.week$V2)))
rownames(all.peak.weeks) <- peak.week$V1

# Cumulative Hosp
cml <- data.frame(`RL01` = tab_RL01$Cml)

# Peak Magnitude
peak <- data.frame(`RL01` = tab_RL01$Peak.Magnitude)

rownames(cml) <- tab_RL01$team
rownames(peak) <- tab_RL01$team

scenario <- "RL02_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL02 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Hosp
cml$RL02 <- long$Cml

# Peak Magnitude
peak$RL02 = long$Peak.Magnitude

scenario <- "RL03_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL03 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Hosp
cml$RL03 <- long$Cml

# Peak Magnitude
peak$RL03 = long$Peak.Magnitude

scenario <- "RL04_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL04 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Hosp
cml$RL04 <- long$Cml

# Peak Magnitude
peak$RL04 = long$Peak.Magnitude

scenario <- "RL05_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL05 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Hosp
cml$RL05 <- long$Cml

# Peak Magnitude
peak$RL05 = long$Peak.Magnitude

scenario <- "RL06_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL06 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Hosp
cml$RL06 <- long$Cml

# Peak Magnitude
peak$RL06 = long$Peak.Magnitude

scenario <- "RL07_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL07 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Hosp
cml$RL07 <- long$Cml

# Peak Magnitude
peak$RL07 = long$Peak.Magnitude

scenario <- "RL08_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL08 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Hosp
cml$RL08 <- long$Cml

# Peak Magnitude
peak$RL08 = long$Peak.Magnitude

knitr::kable(cml, digits = 2, caption = "Cumulative Hospitalizations per 100K") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))
```

### Peak Hosps

```{r hosp_2, warning=FALSE, message = FALSE}

knitr::kable(peak, digits = 2, caption = "Peak Hospitalizations per 100K") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

peak_reduction <- data.frame(RL02 = (peak$RL01 - peak$RL02)/peak$RL01,
                             RL03 = (peak$RL01 - peak$RL03)/peak$RL01,
                             RL04 = (peak$RL01 - peak$RL04)/peak$RL01,
                             RL05 = (peak$RL01 - peak$RL05)/peak$RL01,
                             RL06 = (peak$RL01 - peak$RL06)/peak$RL01,
                             RL07 = (peak$RL01 - peak$RL07)/peak$RL01,
                             RL08 = (peak$RL01 - peak$RL08)/peak$RL01)
rownames(peak_reduction) <- rownames(peak)

knitr::kable(peak_reduction*100, digits = 2, caption = "% Reduction in Peak Hospitalizations per 100K (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

##Peak Week 
knitr::kable(all.peak.weeks, digits = 2, caption = "Peak Week") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

#Peak delay
peak_delay <- data.frame(RL02 = -(all.peak.weeks$RL01 - all.peak.weeks$RL02),
                             RL03 = -(all.peak.weeks$RL01 - all.peak.weeks$RL03),
                             RL04 = -(all.peak.weeks$RL01 - all.peak.weeks$RL04),
                             RL05 = -(all.peak.weeks$RL01 - all.peak.weeks$RL05),
                             RL06 = -(all.peak.weeks$RL01 - all.peak.weeks$RL06),
                             RL07 = -(all.peak.weeks$RL01 - all.peak.weeks$RL07),
                             RL08 = -(all.peak.weeks$RL01 - all.peak.weeks$RL08))
rownames(peak_delay) <- rownames(peak_reduction) 
knitr::kable(peak_delay, digits = 2, caption = "Delay in Peak Week") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))
```


### % Reduction in Hosps

```{r hosp_3, warning=FALSE, message = FALSE}

r <- read.csv("./Hospitalizations_2009.csv")
r$scenario <- sub("_", "", r$scenario)

w <- spread(r[2:4], key = "scenario", value = "reduction")


knitr::kable(w, digits = 2, caption = "% Reduction in Burden (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

```


```{r hosp_4, warning=FALSE, message=FALSE}
t <- rbind(rank(-w[1,2:8]),
          rank(-w[2,2:8]),
          rank(-w[3,2:8]),
          rank(-w[4,2:8]),
          rank(-w[5,2:8]),
          rank(-w[6,2:8]),
          rank(-w[7,2:8]))

dt <- as.data.frame(t)
rownames(dt) <- w$team
colnames(dt) <- colnames(w)[2:8]

knitr::kable(dt, digits = 2, caption = "Rank Order of % Reduction in Burden (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

a <- read.csv("./Hospitalizations_age_2009.csv")
a$scenario <- sub("_", "", a$scenario)

w <- spread(a[2:5], key = "scenario", value = "reduction")

knitr::kable(w[2:9], digits = 2, caption = "% Reduction in Burden by Age (HP01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover")) %>%
  pack_rows(index = table(w$team))

```

```{r hosp_5, warning=FALSE, message=FALSE}
# t <- as.data.frame(t(w[,2:8]))
# colnames(t) <- w$team
# t$mean <- rowMeans(t)
# t$team <- rownames(t)
# 
# o <- arrange(t, mean)
# rownames(o) <- o$team
# 
# ot <- as.data.frame(t(o[,1:8]))
# 
# knitr::kable(ot[8,], digits = 2, caption = "Rank ordered Mean % Reduction in Burden (RL01)") %>%
#   kable_styling(bootstrap_options = c("striped", "hover"))

```

### Cumulative Deaths
```{r death_1, warning=FALSE, message = FALSE}
file.type = file.types[3]
tab_RL01 <- read_ill(scn = "RL01_")
all.peak.weeks <- data.frame(`RL01` = as.integer(gsub("Week", "", peak.week$V2)))
rownames(all.peak.weeks) <- peak.week$V1

# Cumulative Death
cml <- data.frame(`RL01` = tab_RL01$Cml)

# Peak Magnitude
peak <- data.frame(`RL01` = tab_RL01$Peak.Magnitude)

rownames(cml) <- tab_RL01$team
rownames(peak) <- tab_RL01$team

scenario <- "RL02_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL02 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Death
cml$RL02 <- long$Cml

# Peak Magnitude
peak$RL02 = long$Peak.Magnitude

scenario <- "RL03_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL03 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Death
cml$RL03 <- long$Cml

# Peak Magnitude
peak$RL03 = long$Peak.Magnitude

scenario <- "RL04_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL04 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Death
cml$RL04 <- long$Cml

# Peak Magnitude
peak$RL04 = long$Peak.Magnitude

scenario <- "RL05_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL05 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Death
cml$RL05 <- long$Cml

# Peak Magnitude
peak$RL05 = long$Peak.Magnitude

scenario <- "RL06_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL06 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Death
cml$RL06 <- long$Cml

# Peak Magnitude
peak$RL06 = long$Peak.Magnitude

scenario <- "RL07_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL07 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Death
cml$RL07 <- long$Cml

# Peak Magnitude
peak$RL07 = long$Peak.Magnitude

scenario <- "RL08_"
long <- read_ill(scn = scenario)
all.peak.weeks$RL08 = as.integer(gsub("Week", "", peak.week$V2))

# Cumulative Death
cml$RL08 <- long$Cml

# Peak Magnitude
peak$RL08 = long$Peak.Magnitude

knitr::kable(cml, digits = 2, caption = "Cumulative Deaths per 100K") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))
```

### Peak Deaths

```{r death_2, warning=FALSE, message = FALSE}

knitr::kable(peak, digits = 2, caption = "Peak Deaths per 100K") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

peak_reduction <- data.frame(RL02 = (peak$RL01 - peak$RL02)/peak$RL01,
                             RL03 = (peak$RL01 - peak$RL03)/peak$RL01,
                             RL04 = (peak$RL01 - peak$RL04)/peak$RL01,
                             RL05 = (peak$RL01 - peak$RL05)/peak$RL01,
                             RL06 = (peak$RL01 - peak$RL06)/peak$RL01,
                             RL07 = (peak$RL01 - peak$RL07)/peak$RL01,
                             RL08 = (peak$RL01 - peak$RL08)/peak$RL01)
rownames(peak_reduction) <- rownames(peak)

knitr::kable(peak_reduction*100, digits = 2, caption = "% Reduction in Peak Deaths per 100K (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

##Peak Week 
knitr::kable(all.peak.weeks, digits = 2, caption = "Peak Week") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

#Peak delay
peak_delay <- data.frame(RL02 = -(all.peak.weeks$RL01 - all.peak.weeks$RL02),
                             RL03 = -(all.peak.weeks$RL01 - all.peak.weeks$RL03),
                             RL04 = -(all.peak.weeks$RL01 - all.peak.weeks$RL04),
                             RL05 = -(all.peak.weeks$RL01 - all.peak.weeks$RL05),
                             RL06 = -(all.peak.weeks$RL01 - all.peak.weeks$RL06),
                             RL07 = -(all.peak.weeks$RL01 - all.peak.weeks$RL07),
                             RL08 = -(all.peak.weeks$RL01 - all.peak.weeks$RL08))
rownames(peak_delay) <- rownames(peak_reduction) 
knitr::kable(peak_delay, digits = 2, caption = "Delay in Peak Week") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))
```


### % Reduction in Deaths

```{r death_3, warning=FALSE, message = FALSE}

r <- read.csv("./Deaths_2009.csv")
r$scenario <- sub("_", "", r$scenario)

w <- spread(r[2:4], key = "scenario", value = "reduction")


knitr::kable(w, digits = 2, caption = "% Reduction in Burden (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

```


```{r death_4, warning=FALSE, message=FALSE}
t <- rbind(rank(-w[1,2:8]),
          rank(-w[2,2:8]),
          rank(-w[3,2:8]),
          rank(-w[4,2:8]),
          rank(-w[5,2:8]),
          rank(-w[6,2:8]),
          rank(-w[7,2:8]))

dt <- as.data.frame(t)
rownames(dt) <- w$team
colnames(dt) <- colnames(w)[2:8]

knitr::kable(dt, digits = 2, caption = "Rank Order of % Reduction in Burden (RL01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

a <- read.csv("./Deaths_age_2009.csv")
a$scenario <- sub("_", "", a$scenario)

w <- spread(a[2:5], key = "scenario", value = "reduction")

knitr::kable(w[2:9], digits = 2, caption = "% Reduction in Burden by Age (HP01)") %>%
  kable_styling(bootstrap_options = c("striped", "hover")) %>%
  pack_rows(index = table(w$team))
```

```{r death_5, warning=FALSE, message=FALSE}
# t <- as.data.frame(t(w[,2:8]))
# colnames(t) <- w$team
# t$mean <- rowMeans(t)
# t$team <- rownames(t)
# 
# o <- arrange(t, mean)
# rownames(o) <- o$team
# 
# ot <- as.data.frame(t(o[,1:8]))
# 
# knitr::kable(ot[8,], digits = 2, caption = "Rank ordered Mean % Reduction in Burden (RL01)") %>%
#   kable_styling(bootstrap_options = c("striped", "hover"))

```

### Cumulative % Antivirals
```{r av_1, warning=FALSE, message = FALSE}
file.type = file.types[4]
tab_RL03 <- read_ill(scn = "RL03_")

# Cumulative Hosps
cml <- data.frame(`RL03` = tab_RL03$Cml)

# Peak Magnitude
peak <- data.frame(`RL03` = tab_RL03$Peak.Magnitude)

rownames(cml) <- tab_RL03$team
rownames(peak) <- tab_RL03$team

scenario <- "RL04_"
long <- read_ill(scn = scenario)

# Cumulative Antivirals 
cml$RL04 <- long$Cml

# Peak Magnitude
peak$RL04 = long$Peak.Magnitude

scenario <- "RL07_"
long <- read_ill(scn = scenario)

# Cumulative Antivirals 
cml$RL07 <- long$Cml

# Peak Magnitude
peak$RL07 = long$Peak.Magnitude

scenario <- "RL08_"
long <- read_ill(scn = scenario)

# Cumulative Antivirals 
cml$RL08 <- long$Cml

# Peak Magnitude
peak$RL08 = long$Peak.Magnitude

knitr::kable(cml, digits = 2, caption = "Cumulative % Antivirals") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))
```

### Peak % Antivirals

```{r av_2, warning=FALSE, message = FALSE}

knitr::kable(peak, digits = 2, caption = "Peak % Antivirals") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))

```